from datetime import datetime, timedelta
import calendar
import requests
import time
from pprint import pprint
import settings
from utils import *


URL = 'http://api.openweathermap.org/data/2.5/forecast?q={city}&APPID={api_key}'


def c_cmd_weather(args):
    """
    alias: weather
    help: prints the weather

    Example response:


    {'city': {
        'coord': {'lat': 55.9521, 'lon': -3.1965},
        'country': 'GB',
        'id': 2650225,
        'name': 'Edinburgh',
        'population': 435791,
        'sunrise': 1569391384,
        'sunset': 1569434768,
        'timezone': 3600},
        'cnt': 40,
        'cod': '200',
        'list': [
            {'clouds': {'all': 99},
            'dt': 1569412800,
            'dt_txt': '2019-09-25 12:00:00',
            'main': {'grnd_level': 983.53,
                    'humidity': 87,
                    'pressure': 998,
                    'sea_level': 998,
                    'temp': 289.26,
                    'temp_kf': 0.66,
                    'temp_max': 289.26,
                    'temp_min': 288.6},
            'rain': {'3h': 0.25},
            'sys': {'pod': 'd'},
            'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
            'wind': {'deg': 115.746, 'speed': 1.38}},
            ...
        ]
    }

    """

    city = extract_remaining_args(args, 0, 'city', False) or 'Edinburgh'
    response = requests.get(URL.format(
        city=city.replace(' ', '%20'), 
        api_key=settings.OPEN_WEATHER_API_KEY))
    data = response.json()
    if response.status_code != 200:
        error(data['message'])
    times_to_show = {'09:00': '9am', '12:00': '12pm', '15:00': '3pm', '18:00': '6pm'}
    cutoff =  20
    rows = []
    today_str = datetime.today().strftime('%Y-%m-%d')
    for i, day in enumerate(data['list']):
        if len(rows) >= cutoff:
            break
        date, time = day['dt_txt'].split()
        time = time[:5]

        # Skip to next if it's not a time we're interested in showing
        if time not in times_to_show:
            continue

        # Get weekday display
        time_display = times_to_show[time]
        if date == today_str:
            day_display = 'Today'
        else:
            date = datetime.strptime(date, '%Y-%m-%d')
            day_display = calendar.day_name[date.weekday()]

        main = day['main']
        other = day['sys']
        weather = day['weather'][0]['description']
        high = '{}'.format(kelvin_to_c(main['temp_max']))
        low = '{}'.format(kelvin_to_c(main['temp_min']))
        wind = '{}'.format(day['wind']['speed'])
        row = (day_display, time_display, high, low, wind, weather)
        rows.append(row)

    weather_data = [
        ('Day', 'Time', 'High', 'Low', 'Wind', 'Weather')
    ]
    weather_data.extend(rows)

    city_data = [
        ['City:', city.capitalize()],
        ['Population:', data['city']['population']],
        ['Sunrise:', to_hh_mm(data['city']['sunrise'])],
        ['Sunset:', to_hh_mm(data['city']['sunset'])],
    ]
    print_table(city_data, align_left=(0,), blank_below=False)

    print_table(weather_data, align_left=(0, 5), horizontal_borders=(1, ))


def kelvin_to_c(temp):
    return int(temp - 273)

def to_hh_mm(seconds):
    return time.strftime('%H:%M', time.gmtime(seconds))


# For testing purposes
data = {'city': {'coord': {'lat': 55.9496, 'lon': -3.1915},
          'country': 'GB',
          'id': 2650225,
          'name': 'Edinburgh',
          'population': 435791,
          'sunrise': 1569391383,
          'sunset': 1569434767,
          'timezone': 3600},
 'cnt': 40,
 'cod': '200',
 'list': [{'clouds': {'all': 100},
           'dt': 1569423600,
           'dt_txt': '2019-09-25 15:00:00',
           'main': {'grnd_level': 983.42,
                    'humidity': 89,
                    'pressure': 997.96,
                    'sea_level': 997.96,
                    'temp': 289.52,
                    'temp_kf': 1.1,
                    'temp_max': 289.52,
                    'temp_min': 288.423},
           'rain': {'3h': 0.625},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 151.884, 'speed': 1.55}},
          {'clouds': {'all': 98},
           'dt': 1569434400,
           'dt_txt': '2019-09-25 18:00:00',
           'main': {'grnd_level': 982.98,
                    'humidity': 94,
                    'pressure': 997.42,
                    'sea_level': 997.42,
                    'temp': 287.85,
                    'temp_kf': 0.82,
                    'temp_max': 287.85,
                    'temp_min': 287.032},
           'rain': {'3h': 1.625},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 172.318, 'speed': 2.33}},
          {'clouds': {'all': 100},
           'dt': 1569445200,
           'dt_txt': '2019-09-25 21:00:00',
           'main': {'grnd_level': 983.28,
                    'humidity': 94,
                    'pressure': 997.19,
                    'sea_level': 997.19,
                    'temp': 287.11,
                    'temp_kf': 0.55,
                    'temp_max': 287.11,
                    'temp_min': 286.557},
           'rain': {'3h': 0.625},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'light rain',
                        'icon': '10n',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 136.3, 'speed': 1.18}},
          {'clouds': {'all': 100},
           'dt': 1569456000,
           'dt_txt': '2019-09-26 00:00:00',
           'main': {'grnd_level': 981.67,
                    'humidity': 93,
                    'pressure': 995.45,
                    'sea_level': 995.45,
                    'temp': 286.46,
                    'temp_kf': 0.27,
                    'temp_max': 286.46,
                    'temp_min': 286.184},
           'rain': {'3h': 0.875},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'light rain',
                        'icon': '10n',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 110.38, 'speed': 1.83}},
          {'clouds': {'all': 100},
           'dt': 1569466800,
           'dt_txt': '2019-09-26 03:00:00',
           'main': {'grnd_level': 979.6,
                    'humidity': 95,
                    'pressure': 993.35,
                    'sea_level': 993.35,
                    'temp': 285.922,
                    'temp_kf': 0,
                    'temp_max': 285.922,
                    'temp_min': 285.922},
           'rain': {'3h': 1.938},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'light rain',
                        'icon': '10n',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 77.905, 'speed': 2.78}},
          {'clouds': {'all': 100},
           'dt': 1569477600,
           'dt_txt': '2019-09-26 06:00:00',
           'main': {'grnd_level': 977.26,
                    'humidity': 95,
                    'pressure': 991.78,
                    'sea_level': 991.78,
                    'temp': 285.774,
                    'temp_kf': 0,
                    'temp_max': 285.774,
                    'temp_min': 285.774},
           'rain': {'3h': 5.437},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'moderate rain',
                        'icon': '10n',
                        'id': 501,
                        'main': 'Rain'}],
           'wind': {'deg': 111.755, 'speed': 3.47}},
          {'clouds': {'all': 99},
           'dt': 1569488400,
           'dt_txt': '2019-09-26 09:00:00',
           'main': {'grnd_level': 977.7,
                    'humidity': 91,
                    'pressure': 992.14,
                    'sea_level': 992.14,
                    'temp': 284.607,
                    'temp_kf': 0,
                    'temp_max': 284.607,
                    'temp_min': 284.607},
           'rain': {'3h': 6.312},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'moderate rain',
                        'icon': '10d',
                        'id': 501,
                        'main': 'Rain'}],
           'wind': {'deg': 233.579, 'speed': 7.02}},
          {'clouds': {'all': 54},
           'dt': 1569499200,
           'dt_txt': '2019-09-26 12:00:00',
           'main': {'grnd_level': 978.47,
                    'humidity': 72,
                    'pressure': 992.24,
                    'sea_level': 992.24,
                    'temp': 287.516,
                    'temp_kf': 0,
                    'temp_max': 287.516,
                    'temp_min': 287.516},
           'rain': {'3h': 0.126},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 228.756, 'speed': 7.02}},
          {'clouds': {'all': 42},
           'dt': 1569510000,
           'dt_txt': '2019-09-26 15:00:00',
           'main': {'grnd_level': 979.05,
                    'humidity': 74,
                    'pressure': 993.18,
                    'sea_level': 993.18,
                    'temp': 287.243,
                    'temp_kf': 0,
                    'temp_max': 287.243,
                    'temp_min': 287.243},
           'rain': {'3h': 0.188},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 226.233, 'speed': 6.18}},
          {'clouds': {'all': 32},
           'dt': 1569520800,
           'dt_txt': '2019-09-26 18:00:00',
           'main': {'grnd_level': 979,
                    'humidity': 83,
                    'pressure': 993.2,
                    'sea_level': 993.2,
                    'temp': 284.343,
                    'temp_kf': 0,
                    'temp_max': 284.343,
                    'temp_min': 284.343},
           'rain': {'3h': 0.062},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 202.252, 'speed': 3.54}},
          {'clouds': {'all': 100},
           'dt': 1569531600,
           'dt_txt': '2019-09-26 21:00:00',
           'main': {'grnd_level': 979.84,
                    'humidity': 89,
                    'pressure': 993.83,
                    'sea_level': 993.83,
                    'temp': 283.248,
                    'temp_kf': 0,
                    'temp_max': 283.248,
                    'temp_min': 283.248},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'overcast clouds',
                        'icon': '04n',
                        'id': 804,
                        'main': 'Clouds'}],
           'wind': {'deg': 189.967, 'speed': 3.26}},
          {'clouds': {'all': 93},
           'dt': 1569542400,
           'dt_txt': '2019-09-27 00:00:00',
           'main': {'grnd_level': 979.48,
                    'humidity': 93,
                    'pressure': 993.39,
                    'sea_level': 993.39,
                    'temp': 282.693,
                    'temp_kf': 0,
                    'temp_max': 282.693,
                    'temp_min': 282.693},
           'rain': {'3h': 0.062},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'light rain',
                        'icon': '10n',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 183.568, 'speed': 2.97}},
          {'clouds': {'all': 15},
           'dt': 1569553200,
           'dt_txt': '2019-09-27 03:00:00',
           'main': {'grnd_level': 979.15,
                    'humidity': 93,
                    'pressure': 992.7,
                    'sea_level': 992.7,
                    'temp': 281.643,
                    'temp_kf': 0,
                    'temp_max': 281.643,
                    'temp_min': 281.643},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'few clouds',
                        'icon': '02n',
                        'id': 801,
                        'main': 'Clouds'}],
           'wind': {'deg': 173.896, 'speed': 1.8}},
          {'clouds': {'all': 33},
           'dt': 1569564000,
           'dt_txt': '2019-09-27 06:00:00',
           'main': {'grnd_level': 977.73,
                    'humidity': 93,
                    'pressure': 991.45,
                    'sea_level': 991.45,
                    'temp': 281.711,
                    'temp_kf': 0,
                    'temp_max': 281.711,
                    'temp_min': 281.711},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'scattered clouds',
                        'icon': '03n',
                        'id': 802,
                        'main': 'Clouds'}],
           'wind': {'deg': 96.983, 'speed': 1.05}},
          {'clouds': {'all': 100},
           'dt': 1569574800,
           'dt_txt': '2019-09-27 09:00:00',
           'main': {'grnd_level': 977.1,
                    'humidity': 96,
                    'pressure': 991.72,
                    'sea_level': 991.72,
                    'temp': 283.211,
                    'temp_kf': 0,
                    'temp_max': 283.211,
                    'temp_min': 283.211},
           'rain': {'3h': 5},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'moderate rain',
                        'icon': '10d',
                        'id': 501,
                        'main': 'Rain'}],
           'wind': {'deg': 92.67, 'speed': 3.24}},
          {'clouds': {'all': 100},
           'dt': 1569585600,
           'dt_txt': '2019-09-27 12:00:00',
           'main': {'grnd_level': 977.49,
                    'humidity': 94,
                    'pressure': 992.31,
                    'sea_level': 992.31,
                    'temp': 283.505,
                    'temp_kf': 0,
                    'temp_max': 283.505,
                    'temp_min': 283.505},
           'rain': {'3h': 4.875},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'moderate rain',
                        'icon': '10d',
                        'id': 501,
                        'main': 'Rain'}],
           'wind': {'deg': 184.569, 'speed': 1.03}},
          {'clouds': {'all': 100},
           'dt': 1569596400,
           'dt_txt': '2019-09-27 15:00:00',
           'main': {'grnd_level': 978.9,
                    'humidity': 91,
                    'pressure': 992.96,
                    'sea_level': 992.96,
                    'temp': 283.032,
                    'temp_kf': 0,
                    'temp_max': 283.032,
                    'temp_min': 283.032},
           'rain': {'3h': 3.062},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'moderate rain',
                        'icon': '10d',
                        'id': 501,
                        'main': 'Rain'}],
           'wind': {'deg': 245.954, 'speed': 3.92}},
          {'clouds': {'all': 100},
           'dt': 1569607200,
           'dt_txt': '2019-09-27 18:00:00',
           'main': {'grnd_level': 980.5,
                    'humidity': 89,
                    'pressure': 994.39,
                    'sea_level': 994.39,
                    'temp': 283.5,
                    'temp_kf': 0,
                    'temp_max': 283.5,
                    'temp_min': 283.5},
           'rain': {'3h': 0.313},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'light rain',
                        'icon': '10n',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 245.095, 'speed': 4.88}},
          {'clouds': {'all': 100},
           'dt': 1569618000,
           'dt_txt': '2019-09-27 21:00:00',
           'main': {'grnd_level': 982.12,
                    'humidity': 91,
                    'pressure': 996.5,
                    'sea_level': 996.5,
                    'temp': 282.307,
                    'temp_kf': 0,
                    'temp_max': 282.307,
                    'temp_min': 282.307},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'overcast clouds',
                        'icon': '04n',
                        'id': 804,
                        'main': 'Clouds'}],
           'wind': {'deg': 238.296, 'speed': 5.39}},
          {'clouds': {'all': 50},
           'dt': 1569628800,
           'dt_txt': '2019-09-28 00:00:00',
           'main': {'grnd_level': 983.06,
                    'humidity': 93,
                    'pressure': 997.5,
                    'sea_level': 997.5,
                    'temp': 281.729,
                    'temp_kf': 0,
                    'temp_max': 281.729,
                    'temp_min': 281.729},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'scattered clouds',
                        'icon': '03n',
                        'id': 802,
                        'main': 'Clouds'}],
           'wind': {'deg': 242.538, 'speed': 5.37}},
          {'clouds': {'all': 0},
           'dt': 1569639600,
           'dt_txt': '2019-09-28 03:00:00',
           'main': {'grnd_level': 984.34,
                    'humidity': 94,
                    'pressure': 998.54,
                    'sea_level': 998.54,
                    'temp': 281.419,
                    'temp_kf': 0,
                    'temp_max': 281.419,
                    'temp_min': 281.419},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'clear sky',
                        'icon': '01n',
                        'id': 800,
                        'main': 'Clear'}],
           'wind': {'deg': 246.242, 'speed': 4.04}},
          {'clouds': {'all': 10},
           'dt': 1569650400,
           'dt_txt': '2019-09-28 06:00:00',
           'main': {'grnd_level': 984.46,
                    'humidity': 95,
                    'pressure': 998.52,
                    'sea_level': 998.52,
                    'temp': 280.954,
                    'temp_kf': 0,
                    'temp_max': 280.954,
                    'temp_min': 280.954},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'clear sky',
                        'icon': '01n',
                        'id': 800,
                        'main': 'Clear'}],
           'wind': {'deg': 229.019, 'speed': 3.55}},
          {'clouds': {'all': 100},
           'dt': 1569661200,
           'dt_txt': '2019-09-28 09:00:00',
           'main': {'grnd_level': 984.89,
                    'humidity': 94,
                    'pressure': 999.53,
                    'sea_level': 999.53,
                    'temp': 282.822,
                    'temp_kf': 0,
                    'temp_max': 282.822,
                    'temp_min': 282.822},
           'rain': {'3h': 0.812},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 216.027, 'speed': 2.07}},
          {'clouds': {'all': 100},
           'dt': 1569672000,
           'dt_txt': '2019-09-28 12:00:00',
           'main': {'grnd_level': 985.47,
                    'humidity': 91,
                    'pressure': 1000.46,
                    'sea_level': 1000.46,
                    'temp': 284.7,
                    'temp_kf': 0,
                    'temp_max': 284.7,
                    'temp_min': 284.7},
           'rain': {'3h': 0.938},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 291.013, 'speed': 2.55}},
          {'clouds': {'all': 36},
           'dt': 1569682800,
           'dt_txt': '2019-09-28 15:00:00',
           'main': {'grnd_level': 986.64,
                    'humidity': 77,
                    'pressure': 1001.35,
                    'sea_level': 1001.35,
                    'temp': 287.241,
                    'temp_kf': 0,
                    'temp_max': 287.241,
                    'temp_min': 287.241},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'scattered clouds',
                        'icon': '03d',
                        'id': 802,
                        'main': 'Clouds'}],
           'wind': {'deg': 261.621, 'speed': 5.28}},
          {'clouds': {'all': 18},
           'dt': 1569693600,
           'dt_txt': '2019-09-28 18:00:00',
           'main': {'grnd_level': 987.82,
                    'humidity': 85,
                    'pressure': 1002.39,
                    'sea_level': 1002.39,
                    'temp': 283.542,
                    'temp_kf': 0,
                    'temp_max': 283.542,
                    'temp_min': 283.542},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'few clouds',
                        'icon': '02n',
                        'id': 801,
                        'main': 'Clouds'}],
           'wind': {'deg': 241.783, 'speed': 4.86}},
          {'clouds': {'all': 1},
           'dt': 1569704400,
           'dt_txt': '2019-09-28 21:00:00',
           'main': {'grnd_level': 988.63,
                    'humidity': 93,
                    'pressure': 1003.21,
                    'sea_level': 1003.21,
                    'temp': 281.9,
                    'temp_kf': 0,
                    'temp_max': 281.9,
                    'temp_min': 281.9},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'clear sky',
                        'icon': '01n',
                        'id': 800,
                        'main': 'Clear'}],
           'wind': {'deg': 231.281, 'speed': 4.09}},
          {'clouds': {'all': 50},
           'dt': 1569715200,
           'dt_txt': '2019-09-29 00:00:00',
           'main': {'grnd_level': 987.91,
                    'humidity': 96,
                    'pressure': 1002.46,
                    'sea_level': 1002.46,
                    'temp': 280.989,
                    'temp_kf': 0,
                    'temp_max': 280.989,
                    'temp_min': 280.989},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'scattered clouds',
                        'icon': '03n',
                        'id': 802,
                        'main': 'Clouds'}],
           'wind': {'deg': 237.704, 'speed': 2.53}},
          {'clouds': {'all': 100},
           'dt': 1569726000,
           'dt_txt': '2019-09-29 03:00:00',
           'main': {'grnd_level': 986.87,
                    'humidity': 97,
                    'pressure': 1001.47,
                    'sea_level': 1001.47,
                    'temp': 280.811,
                    'temp_kf': 0,
                    'temp_max': 280.811,
                    'temp_min': 280.811},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'overcast clouds',
                        'icon': '04n',
                        'id': 804,
                        'main': 'Clouds'}],
           'wind': {'deg': 255.52, 'speed': 1.35}},
          {'clouds': {'all': 100},
           'dt': 1569736800,
           'dt_txt': '2019-09-29 06:00:00',
           'main': {'grnd_level': 985.54,
                    'humidity': 95,
                    'pressure': 1000.03,
                    'sea_level': 1000.03,
                    'temp': 280.385,
                    'temp_kf': 0,
                    'temp_max': 280.385,
                    'temp_min': 280.385},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'overcast clouds',
                        'icon': '04n',
                        'id': 804,
                        'main': 'Clouds'}],
           'wind': {'deg': 29.301, 'speed': 1.04}},
          {'clouds': {'all': 100},
           'dt': 1569747600,
           'dt_txt': '2019-09-29 09:00:00',
           'main': {'grnd_level': 985.41,
                    'humidity': 83,
                    'pressure': 999.53,
                    'sea_level': 999.53,
                    'temp': 283.043,
                    'temp_kf': 0,
                    'temp_max': 283.043,
                    'temp_min': 283.043},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'overcast clouds',
                        'icon': '04d',
                        'id': 804,
                        'main': 'Clouds'}],
           'wind': {'deg': 46.312, 'speed': 2.16}},
          {'clouds': {'all': 100},
           'dt': 1569758400,
           'dt_txt': '2019-09-29 12:00:00',
           'main': {'grnd_level': 985.82,
                    'humidity': 72,
                    'pressure': 1000.12,
                    'sea_level': 1000.12,
                    'temp': 286.343,
                    'temp_kf': 0,
                    'temp_max': 286.343,
                    'temp_min': 286.343},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'overcast clouds',
                        'icon': '04d',
                        'id': 804,
                        'main': 'Clouds'}],
           'wind': {'deg': 20.569, 'speed': 3.69}},
          {'clouds': {'all': 81},
           'dt': 1569769200,
           'dt_txt': '2019-09-29 15:00:00',
           'main': {'grnd_level': 985.74,
                    'humidity': 76,
                    'pressure': 1000.13,
                    'sea_level': 1000.13,
                    'temp': 286.7,
                    'temp_kf': 0,
                    'temp_max': 286.7,
                    'temp_min': 286.7},
           'rain': {'3h': 0.312},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'light rain',
                        'icon': '10d',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 14.051, 'speed': 3.88}},
          {'clouds': {'all': 44},
           'dt': 1569780000,
           'dt_txt': '2019-09-29 18:00:00',
           'main': {'grnd_level': 987.41,
                    'humidity': 85,
                    'pressure': 1001.57,
                    'sea_level': 1001.57,
                    'temp': 283.159,
                    'temp_kf': 0,
                    'temp_max': 283.159,
                    'temp_min': 283.159},
           'rain': {'3h': 0.188},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'light rain',
                        'icon': '10n',
                        'id': 500,
                        'main': 'Rain'}],
           'wind': {'deg': 22.083, 'speed': 2.5}},
          {'clouds': {'all': 0},
           'dt': 1569790800,
           'dt_txt': '2019-09-29 21:00:00',
           'main': {'grnd_level': 990.16,
                    'humidity': 89,
                    'pressure': 1004,
                    'sea_level': 1004,
                    'temp': 281.2,
                    'temp_kf': 0,
                    'temp_max': 281.2,
                    'temp_min': 281.2},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'clear sky',
                        'icon': '01n',
                        'id': 800,
                        'main': 'Clear'}],
           'wind': {'deg': 283.429, 'speed': 2.02}},
          {'clouds': {'all': 0},
           'dt': 1569801600,
           'dt_txt': '2019-09-30 00:00:00',
           'main': {'grnd_level': 990.17,
                    'humidity': 89,
                    'pressure': 1004.49,
                    'sea_level': 1004.49,
                    'temp': 280.5,
                    'temp_kf': 0,
                    'temp_max': 280.5,
                    'temp_min': 280.5},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'clear sky',
                        'icon': '01n',
                        'id': 800,
                        'main': 'Clear'}],
           'wind': {'deg': 249.013, 'speed': 2.13}},
          {'clouds': {'all': 15},
           'dt': 1569812400,
           'dt_txt': '2019-09-30 03:00:00',
           'main': {'grnd_level': 990.47,
                    'humidity': 92,
                    'pressure': 1004.94,
                    'sea_level': 1004.94,
                    'temp': 279.739,
                    'temp_kf': 0,
                    'temp_max': 279.739,
                    'temp_min': 279.739},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'few clouds',
                        'icon': '02n',
                        'id': 801,
                        'main': 'Clouds'}],
           'wind': {'deg': 249.047, 'speed': 2.25}},
          {'clouds': {'all': 52},
           'dt': 1569823200,
           'dt_txt': '2019-09-30 06:00:00',
           'main': {'grnd_level': 990.77,
                    'humidity': 90,
                    'pressure': 1005.58,
                    'sea_level': 1005.58,
                    'temp': 280.5,
                    'temp_kf': 0,
                    'temp_max': 280.5,
                    'temp_min': 280.5},
           'sys': {'pod': 'n'},
           'weather': [{'description': 'broken clouds',
                        'icon': '04n',
                        'id': 803,
                        'main': 'Clouds'}],
           'wind': {'deg': 228.978, 'speed': 2.17}},
          {'clouds': {'all': 81},
           'dt': 1569834000,
           'dt_txt': '2019-09-30 09:00:00',
           'main': {'grnd_level': 991.54,
                    'humidity': 86,
                    'pressure': 1006.15,
                    'sea_level': 1006.15,
                    'temp': 282.613,
                    'temp_kf': 0,
                    'temp_max': 282.613,
                    'temp_min': 282.613},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'broken clouds',
                        'icon': '04d',
                        'id': 803,
                        'main': 'Clouds'}],
           'wind': {'deg': 80.052, 'speed': 2.89}},
          {'clouds': {'all': 91},
           'dt': 1569844800,
           'dt_txt': '2019-09-30 12:00:00',
           'main': {'grnd_level': 992.29,
                    'humidity': 81,
                    'pressure': 1006.43,
                    'sea_level': 1006.43,
                    'temp': 280.9,
                    'temp_kf': 0,
                    'temp_max': 280.9,
                    'temp_min': 280.9},
           'sys': {'pod': 'd'},
           'weather': [{'description': 'overcast clouds',
                        'icon': '04d',
                        'id': 804,
                        'main': 'Clouds'}],
           'wind': {'deg': 95.128, 'speed': 6.41}}],
 'message': 0.0087}
